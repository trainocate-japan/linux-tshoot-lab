---
sidebar: auto
---

演習ガイド
==
###### v25.08.04.1
> 作成中
## 1. 演習の前に
- この演習は、Linuxで稼働するWebアプリケーションシステム（以下、Webサイト）に発生したトラブルの解決（トラブルシューティング）を実践する演習です。明確な手順は用意されていないため、実務で発生するトラブルとその解決作業と同様、Linuxコマンドを駆使して手探りでの対応が必要となります
- トラブルシューティングを実践するだけでなく、実務で必要になる障害報告書の作成まで行って頂きます
### 演習環境へのログイン方法
> 実務で使えるLinux 入門編と同じです
- 講師（もしくは研修システム）から案内のあった「演習環境への接続情報」で、以下を確認してください
    - 接続先サイト
    - ユーザー名（各自のメールアドレス）
    - パスワード
- 「接続先サイト」へブラウザからアクセスし、ユーザー名（各自のメールアドレス）とパスワードを入力してログインしてください
- しばらく待つと「Login as: 」と聞かれるので、`ec2-user`と入力してください
- 続けて「Password:」と聞かれるので、`password`と入力してください
- 以下のようなメッセージが表示されれば、演習環境へのログインは完了です
```
Welcome to Ubuntu 24.04.2 LTS (GNU/Linux 6.14.0-1010-aws x86_64)
（中略）
ec2-user@ip-X-X-X-X:~ -THISISNOTWORKSPACE- $ 
```
## 2. 演習の流れ
- 演習は、以下の流れで進みます
### 1. オリエンテーション
- 演習の概要や目的、環境の説明を 講師から行います。展開される内容は、基本的に本資料に基づきます
### 2. 現状把握
- トラブル発生の前に、現在のWebシステムの構成を調べる時間です。トラブルシューティングをスムースに進められるようにしておきましょう。現状把握の開始タイミングは講師（もしくは研修システム）から指示があります。指示がありあり、後述の「現状把握の進め方」を見ながら進めてください
### 3.トラブルシューティング実践
- いよいよトラブルシューティングの実践です。前日の座学やこれまで学んできたことを活かして、トラブルを排除しシステムを復旧させましょう。後述の「トラブルシューティングの実践」を見ながら効率よく進めましょう
### 4. 障害報告書作成
- 演習の最後に、トラブルシューティングの記録を報告書に残します。後述の「障害報告書の作成」を見ながら作成してください

## 現状把握でやること
### 構成図の確認
- 構構成に記載されている要素を確認します。これは実務でも同じです。構成図には番号が振られていますので、以下の説明と合わせて全貌を把握しておきましょう
#### 1. 受講者PC
- 皆さんの手元にあるPCです
#### 2. ベースマシン（演習環境）
- ログインしたマシンです。クラウド上の仮想マシンで、演習環境はこの中に構築されています
- 後述のwebサーバーはこのベースマシン上で動作しています
#### 6. 作業端末（workspace）
- 後述のサーバーたちにSSHで接続するための作業場所です。このworkspaceではサーバープロセスは動作していません
#### 3. アプリケーションサーバー（app）
- アプリケーションロジックの動作するサーバーです。Apache Web Server 内でPythonによるビジネスロジックが動作しています
- 通常はworkspaceからSSHでログインします。しかし、ベースマシンからコンソール接続（IPアドレスを使わない接続）も可能です
#### 4. データベースサーバー（db）
- データベースササーバです。apの利用するデータが格納されています。MariaDBが動作しています
- 通常はworkspaceからSSHでログインします。しかし、ベースマシンからコンソール接続（IPアドレスを使わない接続）も可能です
#### 5. Webサーバー（web）
- インターネットとの出入り口になるWebサーバーでNginxで動作しています
- Webサイトの利用者（受講者PC）からのブラウザアクセスは、このWebサーバーを経由してapに繋がります
- このサーバープロセスは、ベースマシン上で動作しています
#### 7. 監視サーバー（netdata）
- Webサイトのシステムを監視しているサーバーです。Netdataというオープンソースの製品を使っています
- 受講者PCのブラウザからログインできます。ログインには認証が必要です。認証情報は構成図に記載されています
### 正常性確認
- トラブルを発生させる前に、Webサイトの正常性を確認しておきます。以下を実施しておきましょう
#### Webサイト情報の把握
- ベースマシンのホームディレクトリには、``というシェルスクリプトがあります。これを実行してイインターネッからの接続情報などを把握しておきましょう
- 以下は実行結果のサンプルです
```
```
- 出力結果の意味は以下の通りです
- 

ホスト名貼り付けるときはhttpなことを確認する

### 初期化処理
- 現状把握が全て終わったら、初期化処理をしておきます
- ホームディレクトリの`init.sh` を実行しておいてください
### （オプション）動画視聴
- トラブルシューティングの準備が早く終わった方は、第3章の動画を視聴しましょう
  - 視聴しなくとも演習には影響ありません
## トラブルシューティングの進め方 
- 以下には、トラブルシューティング時の
#### workspaceホストにログインする


### サーバーを起動できないときは
エラーをよく見る
mariadb.log

### ホストにSSHできないときは
### 全て復旧したはずなのにブラウザからアクセスできない





### 完了報告の前に
- 受講者PCのブラウザからWebサイトへのアクセスが問題なく行えたら、ひとまずとラブルシューティング作業は完了です。



復旧状況は講師から監視しているので、早く終わった人はわかります、障害報告書を丁寧にかくかか


## 障害報告書の作成
- トラブルシューティングが終わったら、障害報告書を作成します。以下の項目を含めてください
- 記載内容の検討にあたり、インターネットの情報を検索するのは構いません
- 生成AIサービスの活用は構いませんが、報告書の作成への使用は禁止します
### 報告書のタイトル
-  （例）「弊社Webサイトにおける障害報告書」
### 概要
- どんなトラブルがいつ発生していつ解決したかを簡潔に記載します
- 詳細はこれから記載するので、ここでは不要です
### 発生日時と復旧日時
### 影響範囲
### 経緯
- 今回の事象の発発から解決までを、時系列で記載してください。何時何分、何が起こったか、何をしたか、ということを記載します
- （例）2025年8月5日午前11時 Webサイトへのアクセスができないとお客様から多数報告あり
### 原因
- 複数の原因があったと思います。わかりやすく箇条書きで記載してください
### 対処内容と施した再発防止策
- それぞれの原因に対し、どういう設定や作業を行ってトラブルシュートをしたかを記載します
- また、同じトラブルが再度発生しないようにどのような対策を取ったかも記載します
### 以上で演習は終了です。お疲れ様でした。日報で今日の1日を振り返りましょう

---
# Appendix
- 以下はより詳細な解説であり、演習の遂行には不要です。演習が早く終わった場合やより詳細を知りたい方はご確認ください
## 構成詳細
### サーバー構成について
- アプリケーションサーバーやデータベースサーバーは、実務の環境に似せるためにそれぞれ別のホストとして構成しています
- ただし今回の演習環境であるAmaon Web Services(AWS)では、VM内でのVMの起動（NestedVM）が仕様上構成できないため、LXCコンテナを使用しました
- LXCはLinux Container という機能で、Linuxでのコンテナ型仮想化の仕組みです。古くから軽量VMとして利用されてきました
  - ちなみにコンテナソリューションとして有名なDockerは、登場した当初その中身はこのLXCでした
- LXCはDockerと異なりsystemdを動作させることができるので、通常のVMとほぼ変わらない使い勝手を実現します。まさに今回のような用途にはうってつけです
### ネットワーク構成について


